# pytest configuration for running webapp tests
[pytest]
# -rsxX        - show skipped, failed, and passed tests
# --tb=native  - print native traceback
addopts = -rsxX --tb=native

env =
    DJANGO_SETTINGS_MODULE=crashstats.settings.test

# Transform all warnings into errors
filterwarnings =
    error
    # some django tests kick up unclosed file warning for favicon
    # https://bugzilla.mozilla.org/show_bug.cgi?id=1909011
    ignore:unclosed file <_io.BufferedReader name='/app/webapp/crashstats/crashstats/static/img/favicon.ico':ResourceWarning
    ignore:unclosed file <_io.FileIO name='/app/webapp/crashstats/crashstats/static/img/favicon.ico':ResourceWarning
